<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test PricingBubbles Simple - Debug Runtime Error</title>
    <style>
        body {
            background: #000;
            color: #fff;
            font-family: Arial, sans-serif;
            padding: 20px;
            margin: 0;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .debug-section {
            background: #111;
            border: 2px solid #00C46C;
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 24px;
        }
        .section-title {
            font-size: 20px;
            font-weight: 700;
            color: #00C46C;
            margin-bottom: 16px;
        }
        .error-display {
            background: rgba(255, 0, 0, 0.1);
            border: 1px solid #ff0000;
            border-radius: 12px;
            padding: 16px;
            margin: 16px 0;
            color: #ff6666;
        }
        .success-display {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
            border-radius: 12px;
            padding: 16px;
            margin: 16px 0;
            color: #66ff66;
        }
        .code-block {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 12px;
            margin: 12px 0;
            font-family: monospace;
            font-size: 14px;
            border-left: 4px solid #00C46C;
            overflow-x: auto;
        }
        .test-button {
            background: #00C46C;
            color: #000;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            margin: 8px;
        }
        .test-button:hover {
            background: #00A050;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="debug-section">
            <div class="section-title">üêõ Debug Runtime Error - "Cannot read properties of undefined (reading 'call')"</div>
            
            <div class="error-display">
                <strong>Erreur d√©tect√©e :</strong> TypeError: Cannot read properties of undefined (reading 'call')
                <br/>Cette erreur indique g√©n√©ralement un probl√®me d'import ou de composant React
            </div>

            <div class="section-title">üîç Analyse du Probl√®me</div>
            
            <p>Cette erreur runtime peut avoir plusieurs causes :</p>
            <ol>
                <li><strong>Import manquant :</strong> Un composant ou module n'est pas correctement import√©</li>
                <li><strong>Composant non d√©fini :</strong> Un composant est utilis√© avant d'√™tre d√©fini</li>
                <li><strong>Probl√®me de scope :</strong> Une fonction est appel√©e en dehors de son contexte</li>
                <li><strong>D√©pendance manquante :</strong> Une biblioth√®que externe n'est pas charg√©e</li>
            </ol>

            <div class="section-title">üß™ Tests de Diagnostic</div>
            
            <button class="test-button" onclick="testBasicFunctionality()">Test 1: Fonctionnalit√© de Base</button>
            <button class="test-button" onclick="testROICalculation()">Test 2: Calcul ROI</button>
            <button class="test-button" onclick="testColorSystem()">Test 3: Syst√®me de Couleurs</button>
            <button class="test-button" onclick="testModalContent()">Test 4: Contenu Modal</button>

            <div id="testResults"></div>
        </div>

        <div class="debug-section">
            <div class="section-title">üìã Code de Test - Fonction getROIColor</div>
            
            <div class="code-block">
// Fonction de test pour le syst√®me de couleurs
function testGetROIColor() {
  const getROIColor = (roi, mintCost) => {
    if (roi === 0) return '#FFD600'; // Jaune pour Initial MINT
    
    const progress = roi / mintCost; // Progression par rapport au MINT initial
    
    if (progress < 0.25) return '#F31260'; // Rouge (0-25%)
    if (progress < 0.5) return '#FF8C00';  // Orange (25-50%)
    if (progress < 0.75) return '#FFD600'; // Jaune (50-75%)
    if (progress < 1) return '#18C964';    // Vert clair (75-100%)
    if (progress >= 1) return '#00C46C';   // Vert fonc√© (100%+)
    return '#00C46C'; // Fallback
  };

  // Tests
  console.log('Test getROIColor:');
  console.log('0% progression:', getROIColor(0, 1500));      // Jaune
  console.log('25% progression:', getROIColor(375, 1500));   // Rouge
  console.log('50% progression:', getROIColor(750, 1500));   // Orange
  console.log('75% progression:', getROIColor(1125, 1500));  // Jaune
  console.log('100% progression:', getROIColor(1500, 1500)); // Vert clair
  console.log('150% progression:', getROIColor(2250, 1500)); // Vert fonc√©
  
  return 'Test getROIColor termin√© avec succ√®s';
}
            </div>

            <button class="test-button" onclick="runROIColorTest()">Ex√©cuter Test ROI Colors</button>
        </div>

        <div class="debug-section">
            <div class="section-title">üîß Solutions Possibles</div>
            
            <div class="success-display">
                <strong>Solution 1 : V√©rifier les Imports</strong>
                <br/>S'assurer que tous les composants React sont correctement import√©s
            </div>

            <div class="success-display">
                <strong>Solution 2 : V√©rifier l'Ordre des D√©clarations</strong>
                <br/>S'assurer que les composants sont d√©clar√©s avant d'√™tre utilis√©s
            </div>

            <div class="success-display">
                <strong>Solution 3 : V√©rifier les D√©pendances</strong>
                <br/>S'assurer que toutes les biblioth√®ques sont install√©es et √† jour
            </div>

            <div class="success-display">
                <strong>Solution 4 : V√©rifier la Syntaxe JSX</strong>
                <br/>S'assurer qu'il n'y a pas d'erreurs de syntaxe dans le JSX
            </div>
        </div>

        <div class="debug-section">
            <div class="section-title">üìä Logs de Console</div>
            
            <div id="consoleLogs" style="background: rgba(0,0,0,0.3); border-radius: 8px; padding: 16px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto;">
                <div>Console logs appara√Ætront ici...</div>
            </div>
            
            <button class="test-button" onclick="clearLogs()">Effacer les Logs</button>
        </div>
    </div>

    <script>
        // Fonction pour ajouter des logs
        function addLog(message, type = 'info') {
            const logsDiv = document.getElementById('consoleLogs');
            const logEntry = document.createElement('div');
            logEntry.style.color = type === 'error' ? '#ff6666' : type === 'success' ? '#66ff66' : '#ffffff';
            logEntry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logsDiv.appendChild(logEntry);
            logsDiv.scrollTop = logsDiv.scrollHeight;
        }

        // Test 1: Fonctionnalit√© de base
        function testBasicFunctionality() {
            try {
                addLog('Test 1: V√©rification des fonctionnalit√©s de base...', 'info');
                
                // Test des variables globales
                if (typeof window !== 'undefined') {
                    addLog('‚úì Window object disponible', 'success');
                } else {
                    addLog('‚úó Window object non disponible', 'error');
                }

                // Test des fonctions de base
                if (typeof console !== 'undefined') {
                    addLog('‚úì Console disponible', 'success');
                } else {
                    addLog('‚úó Console non disponible', 'error');
                }

                addLog('Test 1 termin√© avec succ√®s', 'success');
            } catch (error) {
                addLog(`Test 1 √©chou√©: ${error.message}`, 'error');
            }
        }

        // Test 2: Calcul ROI
        function testROICalculation() {
            try {
                addLog('Test 2: Test du calcul ROI...', 'info');
                
                const calculateRecovered = (completionRate, unitValue, maxCompletions) => {
                    if (!unitValue || !maxCompletions) return 0;
                    const actualCompletions = Math.round((completionRate / 100) * maxCompletions);
                    const totalFees = unitValue * actualCompletions;
                    const recovered = totalFees * 0.50;
                    return recovered;
                };

                const testCases = [
                    { rate: 0, expected: 0 },
                    { rate: 50, expected: 1250 },
                    { rate: 100, expected: 2500 }
                ];

                testCases.forEach(testCase => {
                    const result = calculateRecovered(testCase.rate, 100, 50);
                    if (Math.abs(result - testCase.expected) < 0.01) {
                        addLog(`‚úì ROI ${testCase.rate}%: ${result} (attendu: ${testCase.expected})`, 'success');
                    } else {
                        addLog(`‚úó ROI ${testCase.rate}%: ${result} (attendu: ${testCase.expected})`, 'error');
                    }
                });

                addLog('Test 2 termin√© avec succ√®s', 'success');
            } catch (error) {
                addLog(`Test 2 √©chou√©: ${error.message}`, 'error');
            }
        }

        // Test 3: Syst√®me de couleurs
        function testColorSystem() {
            try {
                addLog('Test 3: Test du syst√®me de couleurs...', 'info');
                
                const getROIColor = (roi, mintCost) => {
                    if (roi === 0) return '#FFD600';
                    const progress = roi / mintCost;
                    if (progress < 0.25) return '#F31260';
                    if (progress < 0.5) return '#FF8C00';
                    if (progress < 0.75) return '#FFD600';
                    if (progress < 1) return '#18C964';
                    return '#00C46C';
                };

                const testCases = [
                    { roi: 0, mintCost: 1500, expectedColor: '#FFD600' },
                    { roi: 375, mintCost: 1500, expectedColor: '#F31260' },
                    { roi: 750, mintCost: 1500, expectedColor: '#FF8C00' },
                    { roi: 1500, mintCost: 1500, expectedColor: '#18C964' },
                    { roi: 2250, mintCost: 1500, expectedColor: '#00C46C' }
                ];

                testCases.forEach(testCase => {
                    const color = getROIColor(testCase.roi, testCase.mintCost);
                    if (color === testCase.expectedColor) {
                        addLog(`‚úì ROI ${testCase.roi}/${testCase.mintCost}: ${color}`, 'success');
                    } else {
                        addLog(`‚úó ROI ${testCase.roi}/${testCase.mintCost}: ${color} (attendu: ${testCase.expectedColor})`, 'error');
                    }
                });

                addLog('Test 3 termin√© avec succ√®s', 'success');
            } catch (error) {
                addLog(`Test 3 √©chou√©: ${error.message}`, 'error');
            }
        }

        // Test 4: Contenu modal
        function testModalContent() {
            try {
                addLog('Test 4: Test du contenu modal...', 'info');
                
                // Simulation des donn√©es ROI
                const mockRoiData = {
                    unitValue: 100,
                    maxCompletions: 50,
                    netProfit: 1000
                };

                if (mockRoiData.unitValue && mockRoiData.maxCompletions) {
                    addLog('‚úì Donn√©es ROI valides', 'success');
                } else {
                    addLog('‚úó Donn√©es ROI invalides', 'error');
                }

                addLog('Test 4 termin√© avec succ√®s', 'success');
            } catch (error) {
                addLog(`Test 4 √©chou√©: ${error.message}`, 'error');
            }
        }

        // Test ROI Colors
        function runROIColorTest() {
            try {
                addLog('Ex√©cution du test ROI Colors...', 'info');
                const result = testGetROIColor();
                addLog(`‚úì ${result}`, 'success');
            } catch (error) {
                addLog(`‚úó Test ROI Colors √©chou√©: ${error.message}`, 'error');
            }
        }

        // Fonction de test getROIColor
        function testGetROIColor() {
            const getROIColor = (roi, mintCost) => {
                if (roi === 0) return '#FFD600';
                const progress = roi / mintCost;
                if (progress < 0.25) return '#F31260';
                if (progress < 0.5) return '#FF8C00';
                if (progress < 0.75) return '#FFD600';
                if (progress < 1) return '#18C964';
                return '#00C46C';
            };

            addLog('Test getROIColor:');
            addLog(`0% progression: ${getROIColor(0, 1500)}`);
            addLog(`25% progression: ${getROIColor(375, 1500)}`);
            addLog(`50% progression: ${getROIColor(750, 1500)}`);
            addLog(`75% progression: ${getROIColor(1125, 1500)}`);
            addLog(`100% progression: ${getROIColor(1500, 1500)}`);
            addLog(`150% progression: ${getROIColor(2250, 1500)}`);
            
            return 'Test getROIColor termin√© avec succ√®s';
        }

        // Effacer les logs
        function clearLogs() {
            document.getElementById('consoleLogs').innerHTML = '<div>Console logs effac√©s...</div>';
        }

        // Initialisation
        addLog('Page de test charg√©e - Pr√™t pour les diagnostics', 'success');
    </script>
</body>
</html> 